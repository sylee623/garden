<!DOCTYPE html>
<html lang="en">
  <body>
    <nav><div>
    <a class="internal-link" href="/garden/"><b>Seoyeon Lee</b></a>
</div>
</nav>
    <div class="wrapper">
      <main><article>
  <div>
    <h1>Voltage imaging reveals hippocampal inhibitory dynamics shaping pyramidal memory-encoding sequences</h1>
    <time datetime="2025-08-07T19:26:26+09:00">
      Last updated on August 7, 2025
      
    </time>
  </div>

  <div id="notes-entry-container">
    <content>
      <h2 id="summary">Summary</h2>
<h3 id="ë…¼ë¬¸-ì •ë³´">ë…¼ë¬¸ ì •ë³´</h3>
<ul>
  <li>
<strong>êµì‹ ì €ì</strong>: Jiannis Taxidis (The Hospital for Sick Children, University of Toronto), Peyman Golshani (UCLA, neuroscience, memory circuits)</li>
  <li>
<strong>ì†Œì†</strong>: UCLA, Stanford, SickKids, MIT ë“±</li>
</ul>

<h3 id="tldr-">TL;DR ğŸ§ </h3>

<h3 id="ì—°êµ¬-ë°°ê²½-ë°-ëª©ì ">ì—°êµ¬ ë°°ê²½ ë° ëª©ì </h3>

<ul>
  <li>HippocampusëŠ” ê²½í—˜ì„ ì‹œí€€ìŠ¤ë¡œ êµ¬ì„±í•´ ê¸°ì–µí™”í•˜ëŠ” í•µì‹¬ ë‡Œ ì—­ì´ë©°, íŠ¹íˆ CA1ì˜ hippocampal pyramidal neuronë“¤ì´ sensory cue ë° ì‹œê°„ ì •ë³´ë¥¼ encodingí•˜ëŠ” ì—­í• ì„ í•œë‹¤. ì´ëŸ¬í•œ</li>
  <li>ì‹œí€€ìŠ¤ëŠ” excitatory-inhibitory balance ìœ„ì—ì„œ í˜•ì„±ë˜ì§€ë§Œ, <mark>inhibitory interneuron</mark>â€”íŠ¹íˆ parvalbumin (PV)ê³¼ somatostatin (SST)ì„ ë°œí˜„í•˜ëŠ” subtypeâ€”ì˜ êµ¬ì²´ì  ê¸°ì—¬ëŠ” ëª…í™•íˆ ê·œëª…ë˜ì§€ ì•Šì•˜ë‹¤.</li>
  <li>ì´ ë…¼ë¬¸ì€ <mark>in vivo voltage imaging</mark>ì„ ì´ìš©í•´ ì´ë“¤ interneuronì˜ ê³ ì† dynamicsë¥¼ ì¶”ì í•˜ê³ , working memory taskì—ì„œì˜ ê¸°ëŠ¥ì„ ë¶„ì„í•œë‹¤.</li>
</ul>

<h3 id="ì£¼ìš”-ë°œê²¬-highlights">ì£¼ìš” ë°œê²¬ (Highlights)</h3>

<ul>
  <li>
<strong>odor cueê°€ ì£¼ì–´ì§ˆ ë•Œ</strong>, PVì™€ SST inhibitory interneuronì€ <strong>odor identityë‚˜ delay timeì— íŠ¹ì´ì ì´ì§€ ì•Šì€ broad spiking</strong>ì„ ë³´ì„.</li>
  <li>odor onset ì§í›„, PV interneuronì˜ <strong>ì§§ì€ burst spikingì´</strong> ì „ì²´ inhibitory interneuronì˜ <strong>synchronized hyperpolarizationê³¼ theta phase reset</strong>ì„ ìœ ë„í•¨.</li>
  <li>ì´ ì‹œì ì˜ inhibitionì€ ëŒ€ë¶€ë¶„ì˜ hippocampal pyramidal neuronì„ ì–µì œí•˜ê³ , <strong>ì†Œìˆ˜ì˜ odor-selective neuronë§Œ rebound spikingì„ í†µí•´ firing</strong>í•˜ê²Œ í•´ì¤Œ.</li>
  <li>PV interneuronì€ pyramidal neuronì˜ spikingì„ ì§ì ‘ ì–µì œí•˜ê³ , SST interneuronì€ ë‹¤ë¥¸ interneuronì„ ì–µì œí•¨ìœ¼ë¡œì¨ <strong>disinhibitory control</strong>ì„ ë‹´ë‹¹í•¨.</li>
  <li>
<strong>interneuronì˜ field activityëŠ” í•™ìŠµ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì¼ì •í•˜ë©°</strong>, ê° ì„¸í¬ì˜ firing íŠ¹ì„±ì€ í•˜ë£¨ ë‹¨ìœ„ë¡œ ë°”ë€” ìˆ˜ ìˆìŒ.</li>
</ul>

<h3 id="methods">Methods</h3>

<ul>
  <li>
<strong>Model</strong>: PV-Cre, SST-Cre mouse line (ê° 5ë§ˆë¦¬)</li>
  <li>
<strong>Voltage imaging</strong>: ASAP3 ë° ASAP4 GEVI ì‚¬ìš©, 1,000 fpsë¡œ CA1ì˜ inhibitory interneuron í™œë™ ê¸°ë¡</li>
  <li>
<strong>Behavioral paradigm</strong>: DNMS (delayed non-match-to-sample) odor task, head-fixed condition</li>
  <li>
<strong>ë³´ì¡° ê¸°ë²•</strong>:
    <ul>
      <li>Neuropixels spike recording (putative pyramidal cell ë° interneuron êµ¬ë¶„)</li>
      <li>Optogenetic suppression using soma-targeted GtACR2</li>
      <li>Two-photon calcium imaging (GCaMP6f)</li>
    </ul>
  </li>
</ul>

<h3 id="results">Results</h3>

<h4 id="in-vivo-voltage-imaging-of-pv-and-sst-cells-during-dnms">In vivo voltage imaging of PV and SST cells during DNMS</h4>
<ul>
  <li>ASAP3ë¡œ spikingê³¼ subthreshold membrane potentialì„ ë™ì‹œì— í¬ì°©</li>
  <li>PVëŠ” SSTë³´ë‹¤ ë†’ì€ burst index, theta modulation, spiking rate ë³´ì„</li>
</ul>

<h4 id="pvsst-cells-encode-odor-delivery-not-odor-identity-or-delay-time">PVâ€“SST cells encode odor delivery, not odor identity or delay time</h4>
<ul>
  <li>ëŒ€ë¶€ë¶„ì˜ PV/SST ì„¸í¬ëŠ” odor ìê·¹ì´ ìˆì„ ë•Œ firingí•˜ì§€ë§Œ, <strong>odor A/Bì— ëŒ€í•œ selectivityëŠ” ê±°ì˜ ì—†ìŒ</strong>
</li>
  <li>delay ê¸°ê°„ì—ëŠ” ë§¤ìš° sparseí•œ firing fieldë§Œ ì¡´ì¬í•¨ â†’ time codingì€ í•˜ì§€ ì•ŠìŒ</li>
</ul>

<h4 id="steady-state-inhibition-across-days-independent-of-training">Steady-state inhibition across days independent of training</h4>
<ul>
  <li>PV/SST ì„¸í¬ì˜ field ìˆ˜, odor selectivityëŠ” í•™ìŠµê³¼ ë¬´ê´€í•˜ê²Œ ì¼ì •</li>
  <li>ê°œë³„ ì„¸í¬ì˜ fieldëŠ” ë‚ ë§ˆë‹¤ ë³€í•˜ì§€ë§Œ ì „ì²´ ì–µì œ ê·œëª¨ëŠ” ìœ ì§€ë¨</li>
</ul>

<h4 id="pvsst-hyperpolarization-at-odor-onset-resets-intracellular-theta">PVâ€“SST hyperpolarization at odor onset resets intracellular theta</h4>
<ul>
  <li>odor ì‹œì‘ ì‹œ, PVì™€ SST ì„¸í¬ ëª¨ë‘ì—ì„œ de-spiked Î”F/Fê°€ ìŒì˜ ë°©í–¥ìœ¼ë¡œ í¬ê²Œ êº¾ì´ëŠ” hyperpolarization ë°œìƒ</li>
  <li>ì´ eventëŠ” trialë§ˆë‹¤ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë©°, <strong>theta phase resetê³¼ ë™ë°˜ë¨</strong>
</li>
</ul>

<h4 id="hyperpolarization-is-preceded-by-pv-spiking-and-synchronizes-rebound-theta-spiking">Hyperpolarization is preceded by PV spiking and synchronizes rebound theta spiking</h4>
<ul>
  <li>hyperpolarizationì€ odor ì‹œì‘ ì§í›„ì˜ PV burst spikingìœ¼ë¡œ ìœ ë„ë¨</li>
  <li>ì´í›„ theta ì£¼ê¸°ì™€ ë™ê¸°í™”ëœ rebound spikingì´ PV ë° SSTì—ì„œ ë°œìƒ â†’ interneuron ì‚¬ì´ì— theta coherence ìœ ë„</li>
</ul>

<h4 id="pv-interneurons-suppress-most-pyramidal-cells-during-odors">PV interneurons suppress most pyramidal cells during odors</h4>
<ul>
  <li>Neuropixels ë° optogenetic suppression ì‹¤í—˜ì—ì„œ, PV inhibitionì´ ëŒ€ë¶€ë¶„ì˜ hippocampal pyramidal neuronì„ odor ë™ì•ˆ ì–µì œí•¨ì„ í™•ì¸</li>
  <li>SST ì–µì œëŠ” ë‹¤ë¥¸ interneuronì˜ spikingì„ ì¦ê°€ì‹œí‚¤ë©° disinhibitory íš¨ê³¼ ìœ ë°œ</li>
</ul>

<h4 id="inhibition-coordinates-odor-cell-and-time-cell-spiking">Inhibition coordinates odor-cell and time-cell spiking</h4>
<ul>
  <li>odor-excited pyramidal neuronì€ <mark>hyperpolarization ì „ì— spikeë¥¼ ë‚´ëŠ” **early spiking group**ê³¼</mark> <mark>rebound ì‹œì ì— spikeë¥¼ ë‚´ëŠ” **late spiking group**</mark>ìœ¼ë¡œ ë‚˜ë‰¨</li>
  <li>ëŒ€ë¶€ë¶„ì˜ time cellì€ odor ìê·¹ ì‹œ ì–µì œë˜ê³ , delay ê¸°ê°„ ë™ì•ˆ í™œì„±í™”ë¨</li>
  <li>ì´ëŸ¬í•œ ê²½í–¥ì€ calcium imaging ë°ì´í„°ì…‹ì—ì„œë„ ì¬í˜„ë¨</li>
</ul>

<h3 id="discussion-ìš”ì•½">Discussion ìš”ì•½</h3>
<ul>
  <li>PV/SST inhibitory interneuronì€ <strong>odor cue ë°œìƒ ì‹œì ì— ê°•í•˜ê²Œ í™œì„±í™”ë˜ì–´ hippocampal pyramidal neuronì˜ background activityë¥¼ ì–µì œ</strong>í•¨ìœ¼ë¡œì¨, odor cueì— selectiveí•œ neuronë“¤ì˜ spikingì„ ê°•ì¡°í•˜ê³ , <strong>signal-to-noise ratioë¥¼ í–¥ìƒ</strong>ì‹œí‚´</li>
  <li>ì´ëŠ” encoding ì‹œì ì—ì„œëŠ” inhibitionì´ í•„ìš”í•˜ì§€ë§Œ, delay ê¸°ê°„ ë™ì•ˆì˜ maintenanceì—ëŠ” ê´€ì—¬í•˜ì§€ ì•ŠëŠ” <strong>temporal gating ì—­í• </strong>ì„ ìˆ˜í–‰í•¨</li>
  <li>interneuronì˜ ensembleì€ ë§¤ì¼ ë‹¤ë¥¸ ì„¸í¬ë¡œ êµ¬ì„±ë˜ë©°, ê³ ì •ëœ spiking patternì´ ì•„ë‹Œ <strong>dynamic inhibition</strong>ì„ êµ¬í˜„í•¨</li>
  <li>hyperpolarizationì˜ ê¸°ì›ì€ medial septum, entorhinal cortex, í˜¹ì€ VIP-mediated disinhibition ë“± ë‹¤ì–‘í•œ ê°€ëŠ¥ì„±ì´ ì œì‹œë¨</li>
  <li>í–¥í›„ ì—°êµ¬ëŠ” PVì™€ SST ë‚´ë¶€ì˜ ì„¸ë¶€ subtype ê°„ ì°¨ì´, ê·¸ë¦¬ê³  ë‹¤ì„¸í¬ voltage imagingì„ í†µí•œ <strong>population-level inhibitory dynamics</strong> ë¶„ì„ìœ¼ë¡œ í™•ì¥ë  ìˆ˜ ìˆìŒ</li>
</ul>

<h2 id="related-article">Related Article</h2>

<h2 id="abstract">Abstract</h2>
<blockquote>
  <p>[!Abstract]
Hippocampal spiking sequences encode and link behaviorally relevant information across time. How inhibition sculpts these sequences remains unclear. We performed longitudinal voltage imaging of CA1 parvalbumin- and somatostatin-expressing interneurons in mice performing an odor-cued working memory task. Unlike pyramidal odor-specific sequences that encode odor and time throughout a delay period, interneurons encoded odor delivery, but not odor identity or delay time. Odor-triggered inhibition was exerted by stable numbers of interneurons across days, with constant cell turnover, independent of task training. At odor onset, brief spiking of parvalbumin interneurons was followed by widespread hyperpolarization and synchronized theta-paced rebound spiking across interneurons. Electrophysiology, optogenetics and calcium imaging corroborated that parvalbumin interneurons silenced most pyramidal cells during odor delivery, whereas somatostatin interneurons suppressed other interneurons. The few odor-selective pyramidal cells spiked together with interneuronal post-hyperpolarization rebound. Collectively, inhibition increases the signal-to-noise ratio of pyramidal cue representations, enabling efficient encoding of memory-relevant information.<mark>=  
</mark>&gt;.<mark>=  
</mark>&gt;</p>
</blockquote>

      <p>This line appears after every note.</p>
    </content>

    <side style="font-size: 0.9em">
      <h3 style="margin-bottom: 1em">Notes mentioning this note</h3>
      

      <div style="font-size: 0.9em">
        <p>
          There are no notes linking to this note.
        </p>
      </div>
      
    </side>
  </div>
</article>

<hr>

<p>Here are all the notes in this garden, along with their links, visualized as a graph.</p>

<style>
  .links line {
    stroke: #ccc;
    opacity: 0.5;
  }

  .nodes circle {
    cursor: pointer;
    fill: #8b88e6;
    transition: all 0.15s ease-out;
  }

  .text text {
    cursor: pointer;
    fill: #333;
    text-shadow: -1px -1px 0 #fafafabb, 1px -1px 0 #fafafabb, -1px 1px 0 #fafafabb, 1px 1px 0 #fafafabb;
  }

  .nodes [active],
  .text [active] {
    cursor: pointer;
    fill: black;
  }

  .inactive {
    opacity: 0.1;
    transition: all 0.15s ease-out;
  }

  #graph-wrapper {
    background: #fcfcfc;
    border-radius: 4px;
    height: auto;
  }
  
  #graph-wrapper > svg {
    max-width: 100%;
    display: block;
  }
</style>

<div id="graph-wrapper">
  <script>
    window.addEventListener("load", loadGraph);

    function loadGraph() {
      var oScript = document.createElement("script");
      oScript.src = "https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js";
      oScript.crossOrigin = 'anonymous';
      oScript.integrity =
        "sha512-FHsFVKQ/T1KWJDGSbrUhTJyS1ph3eRrxI228ND0EGaEp6v4a/vGwPWd3Dtd/+9cI7ccofZvl/wulICEurHN1pg==";
      document.body.appendChild(oScript);
      oScript.onload = () => {
        const MINIMAL_NODE_SIZE = 8;
        const MAX_NODE_SIZE = 12;
        const ACTIVE_RADIUS_FACTOR = 1.5;
        const STROKE = 1;
        const FONT_SIZE = 16;
        const TICKS = 200;
        const FONT_BASELINE = 40;
        const MAX_LABEL_LENGTH = 50;

        const graphData = {"edges":[{"source":"891111171143210210511411511632115101101100","target":"66111110329711211219516911610511633"},{"source":"891111171143210210511411511632115101101100","target":"6532110111116101329798111117116329997116115"},{"source":"891111171143210210511411511632115101101100","target":"84105103101114115"},{"source":"77111118101321211111171143298111100121321011181011141213210097121","target":"67111110115105115116101110991213210511532107101121"},{"source":"6532110111116101329798111117116329997116115","target":"77111118101321211111171143298111100121321011181011141213210097121"},{"source":"67111110115105115116101110991213210511532107101121","target":"891111171143210210511411511632115101101100"},{"source":"891111171143210210511411511632115101101100","target":"236149136235133149237149152236132184236154148"}],"nodes":[{"id":"66111110329711211219516911610511633","path":"/garden/accents","label":"Bon appÃ©tit!"},{"id":"6532110111116101329798111117116329997116115","path":"/garden/cats","label":"A note about cats"},{"id":"84105103101114115","path":"/garden/tigers","label":"Tigers"},{"id":"67111110115105115116101110991213210511532107101121","path":"/garden/consistency","label":"Consistency is key"},{"id":"77111118101321211111171143298111100121321011181011141213210097121","path":"/garden/move-your-body-every-day","label":"Move your body every day"},{"id":"7797110117115991141051121169511611111697108","path":"/garden/manuscript-total","label":"Manuscript_total"},{"id":"6510010010511610511111097108329711097108121115105115","path":"/garden/additional-analysis","label":"Additional analysis"},{"id":"50534855514895102114111109951151041141051091129511611195100111108112104105110","path":"/garden/250730-from-shrimp-to-dolphin","label":"250730_from_shrimp_to_dolphin"},{"id":"123123116105116108101125125","path":"/garden/journal-summary","label":""},{"id":"7311010010511810510011797108321001051021021011141011109910111532105110321001019910511510511111045109971071051101033211510497112101321041111193210910111511110810510998105993210011111297109105110101321141011031171089711610111532991041111059910132991111101021051001011109910132971101003299104971101031014511110245109105110100","path":"/garden/kocharianetalnatneurosci2025","label":"Individual differences in decision-making shape how mesolimbic dopamine regulates choice confidence and change-of-mind"},{"id":"65321021081011201059810810132104105112112111999710911297108321121111121171089711610511111032991111001013210211111432101120112101114105101110991013211410110897116105118101321161113211410111997114100","path":"/garden/sosaetalnatneurosci2025","label":"A flexible hippocampal population code for experience relative to reward"},{"id":"86111108116971031013210510997103105110103321141011181019710811532104105112112111999710911297108321051101041059810511611111412132100121110971091059911532115104971121051101033211212111497109105100971083210910110911111412145101110991111001051101033211510111311710111099101115","path":"/garden/taxidisetalnatneurosci2025","label":"Voltage imaging reveals hippocampal inhibitory dynamics shaping pyramidal memory-encoding sequences"},{"id":"6511032105110116101103114971161011003211510511010310810145110117991081011171153297110100321151129711610597108321161149711011599114105112116111109105991153297116108971153211410111810197108115321161041013210911110810199117108971143210897110100115999711210132111102321161041013210411710997110321041051121121119997109112117115","path":"/garden/thompsonetalnatneurosci2025","label":"An integrated single-nucleus and spatial transcriptomics atlas reveals the molecular landscape of the human hippocampus"},{"id":"78101117114971083297110116105991051129711610511111032111102321181051141161179710832105110102101991161051111103211611410510310310111411532971103210510910911711010132114101115112111110115101","path":"/garden/trabanellietalnatneurosci2025a","label":"Neural anticipation of virtual infection triggers an immune response"},{"id":"8710110899111109101","path":"/garden/welcome","label":"Welcome"},{"id":"891111171143210210511411511632115101101100","path":"/garden/your-first-note","label":"Your first seed"},{"id":"236149136235133149237149152236132184236154148","path":"/garden/%EC%95%88%EB%85%95%ED%95%98%EC%84%B8%EC%9A%94","label":"ì•ˆë…•í•˜ì„¸ìš”"}]}
        let nodesData = graphData.nodes;
        let linksData = graphData.edges;

        const nodeSize = {};

        const updateNodeSize = () => {
          nodesData.forEach((el) => {
            let weight =
              3 *
              Math.sqrt(
                linksData.filter((l) => l.source.id === el.id || l.target.id === el.id)
                  .length + 1
              );
            if (weight < MINIMAL_NODE_SIZE) {
              weight = MINIMAL_NODE_SIZE;
            } else if (weight > MAX_NODE_SIZE) {
              weight = MAX_NODE_SIZE;
            }
            nodeSize[el.id] = weight;
          });
        };

        const onClick = (d) => {
          window.location = d.path
        };

        const onMouseover = function (d) {
          const relatedNodesSet = new Set();
          linksData
            .filter((n) => n.target.id == d.id || n.source.id == d.id)
            .forEach((n) => {
              relatedNodesSet.add(n.target.id);
              relatedNodesSet.add(n.source.id);
            });

          node.attr("class", (node_d) => {
            if (node_d.id !== d.id && !relatedNodesSet.has(node_d.id)) {
              return "inactive";
            }
            return "";
          });

          link.attr("class", (link_d) => {
            if (link_d.source.id !== d.id && link_d.target.id !== d.id) {
              return "inactive";
            }
            return "";
          });

          link.attr("stroke-width", (link_d) => {
            if (link_d.source.id === d.id || link_d.target.id === d.id) {
              return STROKE * 4;
            }
            return STROKE;
          });
          text.attr("class", (text_d) => {
            if (text_d.id !== d.id && !relatedNodesSet.has(text_d.id)) {
              return "inactive";
            }
            return "";
          });
        };

        const onMouseout = function (d) {
          node.attr("class", "");
          link.attr("class", "");
          text.attr("class", "");
          link.attr("stroke-width", STROKE);
        };

        const sameNodes = (previous, next) => {
          if (next.length !== previous.length) {
            return false;
          }

          const map = new Map();
          for (const node of previous) {
            map.set(node.id, node.label);
          }

          for (const node of next) {
            const found = map.get(node.id);
            if (!found || found !== node.title) {
              return false;
            }
          }

          return true;
        };

        const sameEdges = (previous, next) => {
          if (next.length !== previous.length) {
            return false;
          }

          const set = new Set();
          for (const edge of previous) {
            set.add(`${edge.source.id}-${edge.target.id}`);
          }

          for (const edge of next) {
            if (!set.has(`${edge.source.id}-${edge.target.id}`)) {
              return false;
            }
          }

          return true;
        };

        const graphWrapper = document.getElementById('graph-wrapper')
        const element = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        element.setAttribute("width", graphWrapper.getBoundingClientRect().width);
        element.setAttribute("height", window.innerHeight * 0.8);
        graphWrapper.appendChild(element);

        const reportWindowSize = () => {
          element.setAttribute("width", window.innerWidth);
          element.setAttribute("height", window.innerHeight);
        };

        window.onresize = reportWindowSize;

        const svg = d3.select("svg");
        const width = Number(svg.attr("width"));
        const height = Number(svg.attr("height"));
        let zoomLevel = 1;

        const simulation = d3
          .forceSimulation(nodesData)
          .force("forceX", d3.forceX().x(width / 2))
          .force("forceY", d3.forceY().y(height / 2))
          .force("charge", d3.forceManyBody())
          .force(
            "link",
            d3
              .forceLink(linksData)
              .id((d) => d.id)
              .distance(70)
          )
          .force("center", d3.forceCenter(width / 2, height / 2))
          .force("collision", d3.forceCollide().radius(80))
          .stop();

        const g = svg.append("g");
        let link = g.append("g").attr("class", "links").selectAll(".link");
        let node = g.append("g").attr("class", "nodes").selectAll(".node");
        let text = g.append("g").attr("class", "text").selectAll(".text");

        const resize = () => {
          if (d3.event) {
            const scale = d3.event.transform;
            zoomLevel = scale.k;
            g.attr("transform", scale);
          }

          const zoomOrKeep = (value) => (zoomLevel >= 1 ? value / zoomLevel : value);

          const font = Math.max(Math.round(zoomOrKeep(FONT_SIZE)), 1);

          text.attr("font-size", (d) => font);
          text.attr("y", (d) => d.y - zoomOrKeep(FONT_BASELINE) + 8);
          link.attr("stroke-width", zoomOrKeep(STROKE));
          node.attr("r", (d) => {
            return zoomOrKeep(nodeSize[d.id]);
          });
          svg
            .selectAll("circle")
            .filter((_d, i, nodes) => d3.select(nodes[i]).attr("active"))
            .attr("r", (d) => zoomOrKeep(ACTIVE_RADIUS_FACTOR * nodeSize[d.id]));
        };

        const ticked = () => {
          node.attr("cx", (d) => d.x).attr("cy", (d) => d.y);
          text
            .attr("x", (d) => d.x)
            .attr("y", (d) => d.y - (FONT_BASELINE - nodeSize[d.id]) / zoomLevel);
          link
            .attr("x1", (d) => d.source.x)
            .attr("y1", (d) => d.source.y)
            .attr("x2", (d) => d.target.x)
            .attr("y2", (d) => d.target.y);
        };

        const restart = () => {
          updateNodeSize();
          node = node.data(nodesData, (d) => d.id);
          node.exit().remove();
          node = node
            .enter()
            .append("circle")
            .attr("r", (d) => {
              return nodeSize[d.id];
            })
            .on("click", onClick)
            .on("mouseover", onMouseover)
            .on("mouseout", onMouseout)
            .merge(node);

          link = link.data(linksData, (d) => `${d.source.id}-${d.target.id}`);
          link.exit().remove();
          link = link.enter().append("line").attr("stroke-width", STROKE).merge(link);

          text = text.data(nodesData, (d) => d.label);
          text.exit().remove();
          text = text
            .enter()
            .append("text")
            .text((d) => shorten(d.label.replace(/_*/g, ""), MAX_LABEL_LENGTH))
            .attr("font-size", `${FONT_SIZE}px`)
            .attr("text-anchor", "middle")
            .attr("alignment-baseline", "central")
            .on("click", onClick)
            .on("mouseover", onMouseover)
            .on("mouseout", onMouseout)
            .merge(text);

          node.attr("active", (d) => isCurrentPath(d.path) ? true : null);
          text.attr("active", (d) => isCurrentPath(d.path) ? true : null);

          simulation.nodes(nodesData);
          simulation.force("link").links(linksData);
          simulation.alpha(1).restart();
          simulation.stop();

          for (let i = 0; i < TICKS; i++) {
            simulation.tick();
          }

          ticked();
        };

        const zoomHandler = d3.zoom().scaleExtent([0.2, 3]).on("zoom", resize);

        zoomHandler(svg);
        restart();

        function isCurrentPath(notePath) {
          return window.location.pathname.includes(notePath)
        }

        function shorten(str, maxLen, separator = ' ') {
          if (str.length <= maxLen) return str;
          return str.substr(0, str.lastIndexOf(separator, maxLen)) + '...';
        }
      }
    }
  </script>
</div>

</main>
      <footer>


  <footer class="sticky-bottom mt-5" role="contentinfo">
    

    <div class="container">
      
  &copy; Copyright 2025
  Seoyeon
  
  Lee. 
  
  

    </div>
  </footer>

</footer>
    </div>

    <!-- That file is not particularly elegant. This will need a refactor at some point. -->
<style>
  content a.internal-link {
    border-color: #8b88e6;
    background-color: #efefff;
  }

  #tooltip-wrapper {
    background: white;
    padding: 1em;
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
    position: absolute;
    width: 400px;
    height: 250px;
    font-size: 0.8em;
    box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    opacity: 0;
    transition: opacity 100ms;
  }

  #tooltip-wrapper:after {
		content: "";
		position: absolute;
		z-index: 1;
		bottom: 0;
		left: 0;
		pointer-events: none;
		background-image: linear-gradient(to bottom, rgba(255,255,255, 0), rgba(255,255,255, 1) 90%);
		width: 100%;
		height: 75px;
  }
</style>

<div style="opacity: 0; display: none;" id='tooltip-wrapper'>
  <div id='tooltip-content'>
  </div>
</div>

<iframe style="display: none; height: 0; width: 0;" id='link-preview-iframe' src="">
</iframe>

<script>
  var opacityTimeout;
  var contentTimeout;
  var transitionDurationMs = 100;

  var iframe = document.getElementById('link-preview-iframe')
  var tooltipWrapper = document.getElementById('tooltip-wrapper')
  var tooltipContent = document.getElementById('tooltip-content')

  var linkHistories = {};

  function hideTooltip() {
    opacityTimeout = setTimeout(function() {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function() {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs)
  }

  function showTooltip(event) {
    var elem = event.target;
    var elem_props = elem.getClientRects()[elem.getClientRects().length - 1];
    var top = window.pageYOffset || document.documentElement.scrollTop

    if (event.target.host === window.location.host) {
      if (!linkHistories[event.target.href]) {
        iframe.src = event.target.href
        iframe.onload = function() {
          tooltipContentHtml = ''
          tooltipContentHtml += '<div style="font-weight: bold;">' + iframe.contentWindow.document.querySelector('h1').innerHTML + '</div>'
          tooltipContentHtml += iframe.contentWindow.document.querySelector('content').innerHTML

          tooltipContent.innerHTML = tooltipContentHtml
          linkHistories[event.target.href] = tooltipContentHtml

          tooltipWrapper.style.display = 'block';
          setTimeout(function() {
            tooltipWrapper.style.opacity = 1;
          }, 1)
        } 
      } else {
        tooltipContent.innerHTML = linkHistories[event.target.href]
        tooltipWrapper.style.display = 'block';
        setTimeout(function() {
          tooltipWrapper.style.opacity = 1;
        }, 1)
      }


      tooltipWrapper.style.left = elem_props.left - (tooltipWrapper.offsetWidth / 2) + (elem_props.width / 2) + "px";
      if ((window.innerHeight - elem_props.top) < (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top - tooltipWrapper.offsetHeight - 10 + "px";
      } else if ((window.innerHeight - elem_props.top) > (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top + 35 + "px";
      }

      if ((elem_props.left + (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = "10px";
      } else if ((document.body.clientWidth - elem_props.left - (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = document.body.clientWidth - tooltipWrapper.offsetWidth - 20 + "px";
      }
    }
  }

  function setupListeners(linkElement) {
    linkElement.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(event);
    });

    tooltipWrapper.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
    });
  }

  document.querySelectorAll('content a').forEach(setupListeners);
</script>

  </body>
</html>
